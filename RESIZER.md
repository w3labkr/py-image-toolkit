# 이미지 크기 일괄 변경 Python 스크립트 (v1.4)

## 설명

이 Python 스크립트는 지정된 폴더(및 선택적으로 하위 폴더)에 있는 여러 이미지 파일의 크기를 일괄적으로 변경하고, 다양한 옵션을 적용하여 지정된 출력 폴더에 저장하는 도구입니다.

## 주요 기능

* **다양한 리사이즈 방식:**
    * **비율 유지:** 원본 이미지의 가로세로 비율을 유지하면서 지정된 최대 너비/높이에 맞게 크기 조절
    * **고정 크기:** 사용자가 지정한 너비와 높이로 강제 크기 변경 (비율 왜곡 가능)
* **리사이즈 필터 선택:** 이미지 리사이즈 시 사용할 필터(LANCZOS, BICUBIC, BILINEAR, NEAREST)를 선택하여 품질과 속도 조절 가능
* **출력 형식 변환:** 원본 형식을 유지하거나 PNG, JPG, WEBP 형식으로 변환하여 저장 가능
    * JPG/WEBP 저장 시 품질 설정 가능
* **EXIF 메타데이터 유지:** 이미지 리사이즈 시 원본 파일의 EXIF 정보(카메라 정보, 촬영 설정 등)를 유지하는 옵션 제공 (주로 JPG, WEBP, PNG 지원)
* **하위 폴더 처리:** 지정된 입력 폴더뿐만 아니라 그 아래의 모든 하위 폴더에 있는 이미지까지 재귀적으로 처리하는 옵션 제공 (출력 시 폴더 구조 유지)
* **덮어쓰기 방지:** 출력 폴더에 동일한 이름의 파일이 이미 존재할 경우, 자동으로 파일명 뒤에 숫자를 붙여(예: `image_1.jpg`) 원본 파일을 덮어쓰지 않음
* **라이브러리 확인:** 스크립트 실행 전 필요한 라이브러리(`Pillow`, `piexif`) 설치 여부 확인 및 안내
* **오류 처리 및 요약:** 파일 처리 중 발생하는 오류를 감지하고, 스크립트 종료 시 처리 결과(성공, 실패, 건너뜀) 및 오류 파일 목록 요약 제공

## 요구 사항

* Python 3.x 버전 (3.6 이상 권장)
* 필수 Python 라이브러리:
    * `Pillow`: 이미지 처리 핵심 라이브러리
    * `piexif`: EXIF 메타데이터 처리 라이브러리

## 환경 구축

```bash
# Using pyenv to manage Python versions
git clone https://github.com/w3labkr/py-image-toolkit.git
cd py-image-toolkit
pyenv install 3.12.9
pyenv virtualenv 3.12.9 py-image-toolkit-3.12.9
pyenv local py-image-toolkit-3.12.9

# Install dependencies and freeze
pip install Pillow piexif
pip freeze > requirements.txt
```

## 설치

스크립트 실행에 필요한 라이브러리를 설치합니다. 터미널 또는 명령 프롬프트에서 다음 명령어를 실행하세요:

```bash
pip install Pillow piexif
```

## 사용법

1. 스크립트 파일(resizer.py 또는 원하는 이름)을 컴퓨터에 저장합니다.
2. 터미널 또는 명령 프롬프트를 열고 스크립트 파일이 저장된 폴더로 이동합니다 (cd 명령어 사용).
3. 다음 명령어를 입력하여 스크립트를 실행합니다:
   ```python
   python resizer.py
   ```
   (시스템 환경에 따라 python3 resizer.py를 사용해야 할 수도 있습니다.)
4. 스크립트의 안내에 따라 필요한 정보를 순서대로 입력합니다. 예시:
   ```
   1. 이미지가 있는 폴더 경로를 입력하세요: /Users/사용자/Pictures/원본사진
   2. 하위 폴더의 이미지도 포함하여 처리하시겠습니까? (y/n, 기본값: n): y
   3. 결과 저장 폴더 경로 (비워두면 원본 하위 'resized_images' 폴더): /Users/사용자/Pictures/결과사진
   4. 리사이즈 방식 선택:
      1: 가로세로 비율 유지 (최대 너비/높이 내 맞춤)
      2: 지정된 크기로 강제 변경 (비율 왜곡 가능)
      선택 (1 또는 2): 1
   5.  리사이즈 크기 설정 (비율 유지 모드):
      - 최대 너비(px): 1024
      - 최대 높이(px): 1024
   ... (이하 필터, 형식, EXIF 설정 계속) ...
   ```
5. 모든 설정을 입력하면 최종 설정 내역이 표시됩니다. 내용을 확인 후 'y'를 입력하면 이미지 처리가 시작됩니다.
6. 처리가 완료되면 결과 요약 정보가 출력됩니다.

## 문제 해결 (Troubleshooting)

- PermissionError (권한 오류): 스크립트가 특정 폴더나 파일에 접근할 권한이 없을 때 발생합니다. 스크립트를 실행하는 사용자에게 해당 폴더/파일에 대한 읽기/쓰기 권한이 있는지 확인하세요. 관리자 권한으로 실행해야 할 수도 있습니다.
- 라이브러리 미설치 오류 (ModuleNotFoundError): 스크립트 시작 시 라이브러리 확인 메시지가 나타나면, 설치 섹션의 pip install 명령어를 실행하여 필요한 라이브러리를 설치하세요.
- 파일 저장 오류 (OSError): 디스크 공간 부족, 잘못된 파일 이름 문자 사용 등의 이유로 발생할 수 있습니다. 디스크 공간을 확인하고 파일 이름에 특수 문자가 없는지 확인하세요.
- Python 버전 확인: 문제가 지속되면 Python 3 버전이 올바르게 설치되어 있는지 확인하세요. 터미널에서 python --version 또는 python3 --version 명령어로 확인할 수 있습니다.

## 라이선스

이 스크립트는 MIT 라이선스 하에 배포됩니다. 스크립트와 함께 LICENSE 파일을 생성하여 MIT 라이선스 전문을 포함하는 것을 권장합니다.
